# 时间线功能使用说明

## 概述

时间线功能是一个强大的工具，用于展示用户选中一天的所有记录，包括：
- 时间记录 (Time Entries)
- 记忆 (Memories)
- 任务 (Tasks)
- 活动 (Activities)

## 功能特性

### 1. 纵向流式时间线
- 按小时分组显示所有记录
- 垂直时间轴设计，清晰展示时间顺序
- 支持展开/收起长描述内容

### 2. 智能数据聚合
- 自动计算总时长
- 统计分类和标签使用情况
- 支持按类型筛选和查看

### 3. 灵活的视图模式
- **时间线视图**: 按时间顺序展示所有记录
- **统计视图**: 显示详细的数据统计和分析

### 4. 交互功能
- 点击记录查看详情
- 支持编辑和删除操作
- 悬停显示操作按钮

## 使用方法

### 访问时间线

1. **直接访问**: 导航到 `/timeline` 页面
2. **从记忆页面**: 在记忆页面选择 "Stream" 视图，然后点击"查看完整时间线"

### 选择日期

- 使用日期选择器导航到不同日期
- 支持前一天/后一天快速切换
- 一键回到今天

### 查看统计

- 切换视图模式查看统计信息
- 查看总时长、记录数量、分类分布等
- 分析标签使用频率

## 组件结构

### 核心组件

1. **TimelineView**: 主要的时间线显示组件
2. **DateSelector**: 日期选择器
3. **TimelineStats**: 统计信息展示
4. **TimelineItemCard**: 单个时间线项目卡片

### 数据Hook

- **useTimeline**: 获取单日时间线数据
- **useTimelineRange**: 获取日期范围的时间线数据

## 数据源

时间线数据来自多个API端点：

- `/api/time-entries/day` - 获取指定日期的时间记录
- `/api/memories/search` - 获取指定日期范围的记忆
- 任务和活动API (待实现)

## 自定义配置

### 时间格式
- 支持24小时制显示
- 可配置时区设置

### 显示选项
- 可调整卡片展开/收起阈值
- 支持自定义颜色主题
- 可配置统计图表类型

## 技术实现

### 前端技术栈
- React 18 + TypeScript
- Tailwind CSS 样式
- SWR 数据获取和缓存
- Lucide React 图标

### 性能优化
- 数据懒加载
- 智能缓存策略
- 虚拟滚动支持 (大量数据时)

## 扩展功能

### 计划中的功能
- 时间块拖拽编辑
- 批量操作支持
- 导出功能 (PDF, CSV)
- 移动端优化

### 集成可能性
- 日历应用集成
- 项目管理工具同步
- 时间追踪应用连接

## 故障排除

### 常见问题

1. **数据不显示**
   - 检查网络连接
   - 确认用户已登录
   - 验证API端点可用性

2. **时间显示错误**
   - 检查浏览器时区设置
   - 确认服务器时间配置

3. **性能问题**
   - 减少单日记录数量
   - 启用虚拟滚动
   - 检查数据缓存状态

## 贡献指南

欢迎贡献代码和改进建议！

### 开发环境设置
1. 克隆项目
2. 安装依赖: `npm install`
3. 启动开发服务器: `npm run dev`

### 代码规范
- 使用TypeScript严格模式
- 遵循ESLint规则
- 编写单元测试
- 保持组件可复用性

## 许可证

本项目采用 MIT 许可证。
